<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Trailrunning</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>

    <!-- My style -->
    <style>
      #mytooltip {
      	opacity : 0;
      	position: absolute;
      	width : 60px;
      	height: 50px;
      	background: whitesmoke;
      	text-align: left;
      	border: 1px;
      	}
    </style>

    <!-- Plugin CSS -->
    <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/creative.min.css" rel="stylesheet">

    <!-- D3 Tooltip CSS -->
    <link rel="stylesheet" href="css/d3-tip.css">

    <!-- jQuery UI CSS -->
    <link rel="stylesheet" href="css/jquery-ui.min.css">
    <link rel="stylesheet" href="css/jquery-ui.structure.min.css">
    <link rel="stylesheet" href="css/jquery-ui.theme.min.css">

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">Home</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#thestory">The Story</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#occ">OCC</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#comparison">Comparison</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#conclusion">Conclusion</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#references">References</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- intro section -->
    <header class="masthead text-center text-white d-flex">
      <div class="container my-auto">
        <div class="row">
          <div class="col-lg-10 mx-auto">
            <h1 class="text-uppercase">
              <strong>Analyzing OCC Trail Running Competition</strong>
            </h1>
            <hr>
          </div>
          <div class="col-lg-8 mx-auto">
            <p class="text-faded mb-5">We'll be analyzing in detail the OCC trail running competition finsher times, then compare its difficulty with other similar competitions.</p>
            <a class="btn btn-dark btn-xl js-scroll-trigger" href="#thestory">Check the Story</a>
          </div>
        </div>
      </div>
    </header>
    <!-- end of intro section -->

    <!-- thestory section -->
    <section class="bg-primary" id="thestory">
      <div class="container">
        <div class="row">
          <div class="col-lg-10 mx-auto text-center">
            <h2 class="section-heading text-white">The Story</h2>
            <p class="text-faded mb-5" style="text-align:left; font-size:11px;">
              <br />
              Long distance running might be somehow surprizing - especially if the terrain is unknown, as in trail running competitions. While preparing for a race, it would be interesting to have an idea of distribution of arrival times to estimate the difficulty to be expected.<br>

              It happens that the same race accepts slight changes from edition to edition, and it would be also useful to have an overview of these changes and how do they affect the arrival times. <br>

              Amateur atheletes are often aware of the elite arrival times, but the information regarding the estimated arrival of 'somebody like them' is rarely known. <br>

              Moreover, comparing the arrival distribution of a new race to one which they have already run, could refine the expectations of effort. <br>

              On the other hand, race organizers, especially if they are experienced, have a feeling about rush hours and empty hours. But do they have a scientific way to estimate arrival times? For races lasting from 3 to 7 days, optimizing the organization of supplies and medical staff is crucial. <br>

              This is what the current visualization project wishes to address: analyze a race in detail (OCC, taking place in Chamonix, part of UTMB competition) and provide a comparison with UT4M trail (similar distance run in Grenoble).<br>

              I chose to use an interactive slideshow approach, introducing the user the key elements of each scene, then allowing free manipulation of the graphs. <br>
            </p>
            <a class="btn btn-light btn-xl js-scroll-trigger" href="#occ">Continue to OCC</a>
          </div>
        </div>
      </div>
    </section>
    <!-- end of thestory section -->

    <!-- occ section -->
    <section id="occ">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h4 class="section-heading">OCC Finisher Times</h4>
          </div>
        </div>
        <div class="row">
          <p class="text-primary mb-5" style="text-align:left; font-size:11px;">
            - What is the distribution of arrival times for the OCC Trail running competition?<br>
            - How does this distribution vary based on gender, age, year of edition?<br>
            - How did the average running times evolve for OCC between 2014-2017?<br />

          <br /> <br /> The graphs and their interpretation<br /> <strong>A) OCC 2014 - 2017 Analysis (histogram)</strong><br />
            - X axis - duration of the run (15' bins) / Y axis - number of runners in the interval<br /> - Color coding: a main color palette (green/yellow) to highlight the difference between male/female atheletes; secondary color palette (shades ) is used to highlight various age cathegories<br /> - Analysis: consistently more male runners than female runners; male running time is slightly faster than female running time (appx 30' )<br /><br /><strong> A') OCC 2014 - 2017 Average running time evolution</strong><br /> - X Axis: years from 2014 - 2017 / Y Axis: average running time in minutes<br /> - Remark: I chose a line graph for this discreet measure to suggest the evolution of the averages, in a 'trend line' approach<br /> - Analysis: an interesting discovery - the average run times considering all runner cathegories, vary only by 3 min (0.5%) in four years.<br /><br />
            </p>
        </div>

        <div class="row">
            <div class="col-lg-10 text-center">
              <div class="" id="chart-area-xxx">
                <svg class="" id="chart-area-1">
                  <div id="tooltip-chart-1" class="mytooltip"
                          style="
                          position:absolute;
                          width : 100px;
          	              height: 80px;
                          background: whitesmoke;
                        	text-align: left;
                        	border: 5px;
                          opacity: 0">
                  </div>
                  <div id="annotation-chart-1" class="mytooltip"  opacity=0.8
                          style="
                          position:absolute;
                          width : 200px;
                          height: 50px;
                          background: lightblue;
                          text-align: left;
                          border: 1px;">

                  </div>
                </svg>
              </div>
            </div>
            <div class="col-lg-2 text-center" id="filter_area_1">
              <div class="form-group" id="year-slider-div">
                  <label>Year: <span id="year">2017</span></label>
                  <div id="date-slider"></div>
              </div>
              <div class="form-group" id="min-slider-div">
                <label>Range: <span id="minutes">300' - 900'</span></label>
                <div id="minutes-slider"></div>
              </div>
              <div class = "form-group">
                  <label>Gender</label>
                  <select id="occ-gender-select" class="form-control">
                      <option value="occ_gender_women">Women</option>
                      <option value="occ_gender_men">Men</option>
                      <option selected value="occ_gender_all">All</option>
                  </select>
              </div>
              <div class = "form-group">
                  <label>Age cathegory</label>
                  <select id="occ-cat-select" class="form-control">
                      <option value="occ_cat_es">Espoir</option>
                      <option value="occ_cat_se">Senior</option>
                      <option value="occ_cat_ve1">Vet. 1</option>
                      <option value="occ_cat_ve2">Vet. 2</option>
                      <option value="occ_cat_ve3">Vet. 3</option>
                      <option value="occ_cat_ve4">Vet. 4</option>
                      <option selected value="occ_cat_all">All</option>
                  </select>
              </div>
              <div class="">
                <button id="button-reset" class="btn btn-secondary">Reset</button>
              </div>
            </div>
            <div class="col-lg-12 text-center">
              <a class="btn btn-light btn-xl js-scroll-trigger" href="#comparison">Continue to comparison</a>
              <hr class="my-4">
            </div>
        </div>

      </div>
    </section>
    <!-- end of occ section -->

    <!-- trail run comparison section -->
    <section id="comparison">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h4 class="section-heading">Comparison OCC - UT4M</h4>
          </div>
        </div>
        <div class = "row">
          <p class="text-primary mb-5" style="text-align:left; font-size:11px;">
                - How do the mean times from OCC compare to a similar cathegory trail (UT4M Chartreuse 2017)?<br />

                <strong>B) OCC vs UT4M comparison (histogram)</strong><br /> - X &amp; Y axis: similar to A) graph<br /> - Color coding: a main color palette (blue/orange) for differentiating between OCC/UT4M; secondary color palette (shades) for less important differentiation btw cathegories<br />
               - Analysis: OCC presents a significanlty higher effort than UT4M (a difference of appx 3h on average)<br /><br />
          </p>
        </div>
        <div class="row">
          <div class="col-lg-10 text-center">
            <div class="" id="chart-area-graph2-comparison">
                <svg class="" id="chart-area-2">
                </svg>
            </div>
          </div>
          <div class="col-lg-2" id="filter_area_2">
            <div class="form-group" id="race-select-div">
              <label><span id="year">Races</span></label>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="checkRaceOCC" checked>
                <label class="form-check-label" for="checkRaceOCC">
                  OCC
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="checkRaceUT4M" checked>
                <label class="form-check-label" for="checkRaceUT4M">
                  UT4M
                </label>
              </div>
            </div>

            <div class="form-group" id="gender-select-div">
              <label><span id="year">Gender</span></label>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="checkGenderWomen" checked>
                <label class="form-check-label" for="checkGenderWomen">
                  Women
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="checkGenderMen" checked>
                <label class="form-check-label" for="checkGenderMen">
                  Men
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-12 text-center">
          <a class="btn btn-light btn-xl js-scroll-trigger" href="#conclusion">Conclusion</a>
          <hr class="my-4">
        </div>
      </div>
    </section>
    <!-- end of trail run comparison section -->

    <!-- conclusion section-->
    <section class="bg-primary" id="conclusion">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-center">
            <h2 class="section-heading text-white">Conclusion</h2>
            <hr class="light my-4">
            <p class="text-faded mb-4" style="text-align:left; font-size:12px;">
              - This analysis might be useful to evaluate one's expected completion time in a specific competition based on previous experiences (ex in our case: expected OCC after UT4M)<br />
              - Further investigation might be possible - adding other competitions to the comparison, considering specific distances, elevation gains, terrain etc. <br />
              - Some more text <br />
              - Some more text <br />
              - Some more text <br />
              - Some more text <br />
              - Some more text <br />
              - Some more text <br />
              - Some more text <br />
            </p>
            <a class="btn btn-light btn-xl js-scroll-trigger" href="#references">References</a>
          </div>
        </div>
      </div>
    </section>
    <!-- end of conclusion section -->

    <!-- references section -->
    <section id="references">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-center">
            <h2 class="section-heading">References and technical details</h2>
            <hr class="my-4">
            <p class="mb-5" style="text-align:left; font-size:12px;">
              <em>Data sources:</em><br />
                - UT4M: https://ut4m.fr/fr/courses/resultats <br>
                - UTMB/OCC: http://utmbmontblanc.com/en/page/107/107.html<br />
              <br />
              <em> Data prep:</em><br />
                - Downloaded, cleaned and concatenated the yearly results <br>
                - Python used to clean data formatting issues<br>
                - Python with Pandas used to create the time bins / histograms. I have decided to perform the data prep part on python side wherever possible, to facilitate manipulation on in JS<br>
              <br />
              <em> External resources:</em><br />
                - Bootstrap, used for site navigation <br>
                - Creative one-page design, for single page design template<br>
                - Udemy D3 training <br>
                - Examples from http://bl.ocks.org<br>
              <br />
              <em> Some tech choices:</em><br />
                - Since we have several graphs on a single page, each graph has its own list of parameters in a dedicated structure.<br>
                - Whenever possible I have tried to use a declarative approach
                - For the stacked bar charts, I have taken inspiration from the following design http://bl.ocks.org<br>
              <br />
            </p>
          </div>
        </div>
      </div>
    </section>
    <!-- end of references section -->

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="vendor/scrollreveal/scrollreveal.min.js"></script>
    <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/creative.min.js"></script>

    <!-- Load the d3.js and jquery library -->
    <script src="js/d3.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script> -->
    <script src="js/jquery-ui.min.js"></script>

    <!-- Additional d3 libraries -->
    <script src="js/d3-tip.js"></script>

    <!-- Graphs -->
    <script src="js/graph_1.js"></script>
    <!-- <script src="js/graph_2.js"></script> -->
    <script src="js/graph_2_compare.js"></script>

    <!-- <script>graph_2();</script> -->
  </body>

</html>
