<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Trailrunning</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>

    <!-- My style -->
    <style>
      #mytooltip {
      	opacity : 0;
      	position: absolute;
      	width : 160px;
      	height: 80px;
      	background: whitesmoke;
      	text-align: left;
      	border: 1px;
      	}
    </style>

    <!-- Plugin CSS -->
    <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/creative.min.css" rel="stylesheet">

    <!-- D3 Tooltip CSS -->
    <link rel="stylesheet" href="css/d3-tip.css">

    <!-- jQuery UI CSS -->
    <link rel="stylesheet" href="css/jquery-ui.min.css">
    <link rel="stylesheet" href="css/jquery-ui.structure.min.css">
    <link rel="stylesheet" href="css/jquery-ui.theme.min.css">

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">Home</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#thestory">The Story</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#occ">OCC</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#comparison">Comparison</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#conclusion">Conclusion</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#references">References</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- intro section -->
    <header class="masthead text-center text-white d-flex">
      <div class="container my-auto">
        <div class="row">
          <div class="col-lg-10 mx-auto">
            <h1 class="text-uppercase">
              <strong>Analysis of the OCC Trail Running Competition</strong>
            </h1>
            <hr>
          </div>
          <div class="col-lg-8 mx-auto">
            <p class="text-faded mb-5">We'll be analyzing in detail the OCC trail running competition finsher times, then compare them with the UT4M similar competition.</p>
            <a class="btn btn-dark btn-xl js-scroll-trigger" href="#thestory">The Story</a>
            <a class="btn btn-dark btn-xl js-scroll-trigger" data-toggle="modal" data-target="#modalAboutTheVisualization">About the Visualization</a>
          </div>
        </div>
      </div>
    </header>
    <!-- end of intro section -->

    <!-- thestory section -->
    <section class="bg-primary" id="thestory">
      <div class="container">
        <div class="row">
          <div class="col-lg-10 mx-auto text-center">
            <h2 class="section-heading text-white">The Story</h2>
            <p class="text-faded mb-5" style="text-align:left; font-size:14px;">
              <br />
              Long distance running might be somehow surprizing - especially if the terrain is unknown, as in trail running competitions. While preparing for a race, it would be interesting to have an idea of the distribution of arrival times to estimate the difficulty to be expected.
              <br><br>
              It happens that the same race accepts slight changes from edition to edition, and it would be also useful to have an overview of these changes and how do they affect the arrival times. <br><br>

              Amateur atheletes are often aware of the elite arrival times, but the information regarding the estimated arrival of 'somebody like them' is rarely known. Moreover, comparing the arrival distribution of a new race to one which they have already run, could refine the expectations of effort. <br><br>

              On the other hand, race organizers, especially if they are experienced, have a feeling about rush hours and empty hours. But do they have a scientific way to estimate arrival times? For races lasting from 3 to 7 days, optimizing the organization of supplies and medical staff is crucial. <br><br>

              This is what the current visualization project wishes to address: analyze a race in detail (OCC, taking place in Chamonix, part of UTMB competition) and provide a comparison with UT4M Chartreuse, Vercors and Belledonne Trails (similar distance runs in Grenoble).<br><br>
            </p>
            <a class="btn btn-light btn-xl js-scroll-trigger" href="#occ">Continue to OCC</a>
          </div>
        </div>
      </div>
    </section>
    <!-- end of thestory section -->

    <!-- occ section -->
    <section id="occ">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h4 class="section-heading">OCC Finisher Times</h4>
          </div>
        </div>
        <div class="row">
          <p class="text-primary mb-5" style="text-align:left; font-size:12px;">
            <br>
            In order to understand the difficulty of a race (OCC here), a runner might ask some questions - apart the traditional "type, distance, elevation gain".<br>

            - What is the distribution of arrival times for the OCC Trail running competition?<br>
            - How does this distribution vary based on gender, age, year of edition?<br>
            - How did the average running times evolve for OCC between 2014-2017?<br>

            <br>

            <strong>OCC 2014 - 2017 Analysis (histogram)</strong>
            <br>We notice that there the distribution presents a familiar bell shape, consistent for each edition, for both male and female atheletes and for all age groups. Some age groups (Espoir, Vet3 and Vet4) do not have sufficient runners to allow any conclusion. There are consistently more male runners than female runners, and male running time is slightly faster than female running time (appx 30' )<br><br>

            <strong>OCC 2014 - 2017 Average running time evolution</strong><br>
            The race, though presenting slight variations in distance and elevation gain through the years, has maintained a relatively consistent finiher time distribution.<br><br>

            <strong>Play with the graph</strong><br>
            You can use the controls on the right side to navigate through various editions and filter on specific cathegories. If you wish to highlight a specific arrival interval, use the double slider filtering on arrival times.
          </p>

        </div>

        <div class="row">
            <div class="col-lg-10 text-center">
              <div class="" id="chart-area-xxx">
                <svg class="" id="chart-area-1">
                  <div id="tooltip-chart-1" class="mytooltip"
                          style="
                          position:absolute;
                          width : 200px;
          	              height: 170px;
                          background: whitesmoke;
                        	text-align: left;
                        	border: 5px;
                          opacity: 0">
                  </div>
                  <div id="annotation-chart-1" class="mytooltip"  opacity=0.8
                          style="
                          position:absolute;
                          width : 200px;
                          height: 50px;
                          background: lightblue;
                          text-align: left;
                          border: 1px;">

                  </div>
                </svg>
              </div>
            </div>
            <div class="col-lg-2 text-center" id="filter_area_1">
              <div class="form-group" id="year-slider-div">
                  <label>Year: <span id="year">2017</span></label>
                  <div id="date-slider"></div>
              </div>
              <div class="form-group" id="min-slider-div">
                <label>Range: <span id="minutes">300' - 900'</span></label>
                <div id="minutes-slider"></div>
              </div>
              <div class = "form-group">
                  <label>Gender</label>
                  <select id="occ-gender-select" class="form-control">
                      <option value="occ_gender_women">Women</option>
                      <option value="occ_gender_men">Men</option>
                      <option selected value="occ_gender_all">All</option>
                  </select>
              </div>
              <div class = "form-group">
                  <label>Age cathegory</label>
                  <select id="occ-cat-select" class="form-control">
                      <option value="occ_cat_es">Espoir</option>
                      <option value="occ_cat_se">Senior</option>
                      <option value="occ_cat_ve1">Vet. 1</option>
                      <option value="occ_cat_ve2">Vet. 2</option>
                      <option value="occ_cat_ve3">Vet. 3</option>
                      <option value="occ_cat_ve4">Vet. 4</option>
                      <option selected value="occ_cat_all">All</option>
                  </select>
              </div>
              <div class="">
                <button id="button-reset" class="btn btn-secondary">Reset</button>
              </div>
            </div>
            <div class="col-lg-12 text-center">
              <a class="btn btn-light btn-xl js-scroll-trigger" href="#comparison">Continue to comparison</a>
              <hr class="my-4">
            </div>
        </div>

      </div>
    </section>
    <!-- end of occ section -->

    <!-- trail run comparison section -->
    <section id="comparison">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h4 class="section-heading">Comparison OCC - UT4M</h4>
          </div>
        </div>
        <div class = "row">
          <p class="text-primary mb-5" style="text-align:left; font-size:11px;">
            <br>
            <strong>How is the distribution of finiher times of OCC compare to another race?</strong>
            <br>
            We take as an example the UTM4 2017 race series, presenting a similar distance and elevation gain.
            <br>
            We notice that the arrival times are consistently faster in the latter race, suggesting that it is noticeably 'easier' than the OCC.
            <br>
            Remark: This analysis does not consider individual runners, and it might be interesting to compare ITRA classification of competing atheletes.<br><br>

            <strong>Play with the graph</strong><br>
            Using the filters on the right side, you can select the races to be displayed, filtering further on genders.
          </p>
        </div>
        <div class="row">
          <div class="col-lg-10 text-center">
            <div class="" id="chart-area-graph2-comparison">
                <svg class="" id="chart-area-2">
                </svg>
            </div>
          </div>
          <div class="col-lg-2" id="filter_area_2">
            <div class="form-group" id="race-select-div">
              <label><span id="year">Races</span></label>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="checkRaceOCC" checked>
                <label class="form-check-label" for="checkRaceOCC">
                  OCC
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="checkRaceUT4MChartreuse" checked>
                <label class="form-check-label" for="checkRaceUT4MChartreuse">
                  UT4M Chart.
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="checkRaceUT4MVercors" checked>
                <label class="form-check-label" for="checkRaceUT4MVercors">
                  UT4M Vercors
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="checkRaceUT4MBelledonne" checked>
                <label class="form-check-label" for="checkRaceUT4MBelledonne">
                  UT4M Belled.
                </label>
              </div>
            </div>

            <div class="form-group" id="gender-select-div">
              <label><span id="year">Gender</span></label>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="checkGenderWomen" checked>
                <label class="form-check-label" for="checkGenderWomen">
                  Women
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="checkGenderMen" checked>
                <label class="form-check-label" for="checkGenderMen">
                  Men
                </label>
              </div>
            </div>

            <div class="">
              <button id="button-reset-graph-2" class="btn btn-secondary">Reset</button>
            </div>

          </div>
        </div>
        <div class="col-lg-12 text-center">
          <a class="btn btn-light btn-xl js-scroll-trigger" href="#conclusion">Conclusion</a>
          <hr class="my-4">
        </div>
      </div>
    </section>
    <!-- end of trail run comparison section -->

    <!-- conclusion section-->
    <section class="bg-primary" id="conclusion">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-center">
            <h2 class="section-heading text-white">Conclusion</h2>
            <hr class="light my-4">
            <p class="text-faded mb-4" style="text-align:left; font-size:12px;">
              - This analysis might be useful to evaluate one's expected completion time in a specific competition based on previous experiences (ex in our case: expected OCC after UT4M)<br />
              - Further investigation might be possible - adding other competitions to the comparison, considering specific distances, elevation gains, terrain etc. <br />
            </p>
            <a class="btn btn-light btn-xl js-scroll-trigger" href="#references">References</a>
          </div>
        </div>
      </div>
    </section>
    <!-- end of conclusion section -->

    <!-- references section -->
    <section id="references">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-center">
            <h2 class="section-heading">References and technical details</h2>
            <hr class="my-4">
            <p class="mb-5" style="text-align:left; font-size:12px;">
              <em>Data sources:</em><br />
              - <a target="_blank" rel="noopener noreferrer" href="https://ut4m.fr/fr/courses/resultats"> UT4M Results</a><br>
              - <a target="_blank" rel="noopener noreferrer" href="http://utmbmontblanc.com/en/page/107/107.html">UTMB/OCC Results</a><br>
              <br>
              <em>Data preparaing:</em><br>
                - Downloaded, cleaned and concatenated the yearly results <br>
                - Python used to clean data formatting issues<br>
                - Python with Pandas used to create the time bins / histograms. Performed the data prep part on python side wherever possible, to facilitate manipulation in js<br>
              <br>
              <em>Resources:</em><br />
                - <a target="_blank" rel="noopener noreferrer" href="https://getbootstrap.com/">Bootstrap</a><br>
                - <a target="_blank" rel="noopener noreferrer"  href="https://blackrockdigital.github.io/startbootstrap-creative/">Creative one-page design, for single page design template</a><br>
                - <a target="_blank" rel="noopener noreferrer" href="https://www.udemy.com/masteringd3js/">Udemy D3 details</a><br>
                - <a target="_blank" rel="noopener noreferrer" href="http://bl.ocks.org">Chart examples at bl.ocks.org</a><br>
              <br />
            </p>
          </div>
        </div>
      </div>
    </section>
    <!-- end of references section -->

    <!-- Modal -->
    <div class="modal fade bd-example-modal-lg" id="modalAboutTheVisualization" tabindex="-1" role="dialog" aria-labelledby="modalAboutTheVisualizationTitle" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalAboutTheVisualizationTitle">ABOUT THE VISUALIZATION</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <h4>Narrative structure and scenes</h4>

            <br>

            This visualization aims to analyze the results of several trail running races, with a special focus on the OCC competition.

            The user follows the story, being allowed to highlight specific aspects of the data on one static and two interactive scenes.

            <br><br>

            First, he is introduced to the subject ("About the Story") and the problems addressed by the project. In the second scene ("OCC") the user is presented a detailed view of the OCC competition, between 2014 - 2017; at this stage, several filtering actions are possible. The story continues to a comparison between OCC 2017 and anoter similar race, UT4M ("Comparison"); also in this view, user interaction is allowed.

            <br><br>

            The presentation ends with a cunclusion and technical details.

            <br><br>

            <h4>Annotations</h4>

            <br>
            Annotations are used to provide information for the analysis of the OCC race through various years. Since there are slight distance and elevation gain differences between several editions, when triggered by the 'year selection slider', the information related to the selected year is displayed.

            <br><br>

            <h4>Parameters and triggers</h4>

            <br>

            The user is allowed to control various parameters in the first dynamic scene ("OCC"). Changing of "Year" slider triggers an update of the race results and the associated annotation. For each edition, the used can filter results on the Gender and Age group of the participants. Furthermore, he can filter on arrival times to have a better view on specific chunks of the results.<br><br>

            The html elements used at this stage are sliders (simple and double) and dropdown lists.

            <br><br>

            For the second dynamic scene ("Comparison"), the user is allowed to filter the races added to the comparison and the gender of the participants.

            <br><br>

            The html elements used in this section are checkboxes.

            <br><br>

            <h4>Visual choices</h4>
            <br>
            <ul>
              <li>The visualization uses stacked bar charts, to present the race results as a distribution.</li>
              <li>A paired color scheme is used; the main color palette represents age groups (OCC) and races (Comparison), and the secondary color palette (shades) is used to emphasize runners' gender. </li>
              <li>All axis are linear; X axis - duration of the run (15' bins) and Y axis - number of runners in the 15' interval time bins.</li>
              <li>The axis are 'OCC' adapting dynamically to filters, thus allowing a focus on specific details. For the 'Comparison' scene, the axis are static, thus consistently presenting the selected races in their context.</li>
            </ul>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
            <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="vendor/scrollreveal/scrollreveal.min.js"></script>
    <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/creative.min.js"></script>

    <!-- Load the d3.js and jquery library -->
    <script src="js/d3.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script> -->
    <script src="js/jquery-ui.min.js"></script>

    <!-- Additional d3 libraries -->
    <script src="js/d3-tip.js"></script>

    <!-- Graphs -->
    <script src="js/graph_1.js"></script>
    <!-- <script src="js/graph_2.js"></script> -->
    <script src="js/graph_2_compare.js"></script>

    <!-- <script>graph_2();</script> -->
  </body>

</html>
